<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
              rel="stylesheet"
              integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
              crossorigin="anonymous"/>
        <!-- Jquery -->
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <title>New Join</title>
    </head>
    <body style="background: #fafafa;">
        <div style="display: flex;
                    flex-direction: column;
                    align-items: center;
                    width: 100%;">
            <div style="text-align:center;
                        padding:20px;
                        border: solid 1px lightgray;
                        width: 300px;
                        height: 450px;
                        margin-top: 30px;
                        background: white;">
                <div>
                    <img style="width:200px; "
                         src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1024px-Instagram_logo.svg.png">
                </div>
                <div style="color: rgb(163, 163, 163);
                            font-weight: bold;
                            font-size: 16px;
                            padding-bottom: 25px;">
                    Sign up to see photos and videos from your friends.
                </div>
                <div>
                    <div class="form-floating mb-3">
                        <input type="email"
                               style="font-size: 14px;
                                      height: 24px;"
                               class="form-control"
                               id="input_email"
                               placeholder="name@example.com">
                        <label for="input_email" style="font-size: 14px; padding: 5px 10px;">Email</label>
                    </div>
                </div>
                <div>
                    <div class="form-floating mb-3">
                        <input type="text"
                               style="font-size: 14px;
                                      height: 24px;"
                               class="form-control"
                               id="input_name"
                               placeholder="name@example.com">
                        <label for="input_name" style="font-size: 14px; padding: 5px 10px;">Full Name</label>
                    </div>
                </div>
                <div>
                    <div class="form-floating mb-3">
                        <input type="text"
                               style="font-size: 14px;
                                      height: 24px;"
                               class="form-control"
                               id="input_nickname"
                               placeholder="name@example.com">
                        <label for="input_nickname" style="font-size: 14px; padding: 5px 10px;">Username</label>
                    </div>
                </div>
                <div>
                    <div class="form-floating mb-3">
                        <input type="password"
                               style="font-size: 14px;
                                      height: 24px;"
                               class="form-control"
                               id="input_password"
                               placeholder="name@example.com">
                        <label for="input_password" style="font-size: 14px; padding: 5px 10px;">Password</label>
                    </div>
                </div>
                <button id="join_button"
                        type="button"
                        class="btn btn-primary"
                        style="width: 100%;">Sign Up</button>
            </div>
            <div style="text-align:center;
                        padding:20px;
                        border: solid 1px lightgray;
                        width: 300px;
                        height: 70px;
                        margin-top: 30px;
                        background: white;">
                <div>
                    Have an account? <a href="login">Log In</a>
                </div>
            </div>
        </div>

        
        <script>
            $('#join_button').click(function (){


                let email = $("#input_email").val()
                let password = $("#input_password").val()
                let nickname = $("#input_nickname").val()
                let name = $("#input_name").val()

                console.log('Email :' + email + ', Name :'  + name + ', Nickname :'  +  nickname + ', Password :'  +  password)


                $.ajax({
                    url: "/user/join",
                    data: {
                        email : email,
                        password : password,
                        nickname : nickname,
                        name : name,
                    }, 
                    method: "POST",
                    success: function(data){
                        console.log("Good job");
                        alert("Welcome to the Instagram! Please log in.")
                        location.replace('/user/login')
                    },
                    error: function(request, status, error) {
                        console.log("Error")
                    },
                    complete: function (){
                        console.log("Done")
                    }
                });
            });
        </script>
        <!-- Optional JavaScript; choose one of the two! -->
        <!-- Option 1: Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- Option 2: Separate Popper and Bootstrap JS -->
        <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
    </body>
</html>
